"0","geom_mean <- function(x) {"
"0","  exp(mean(log(x)))"
"0","}"
"0",""
"0","drop_empties <- function(df) {"
"0","  df <- df %>% select_if(function(x) !(all(is.na(x)) | all(x == """") | all(x == ""NR"")))"
"0","  return(df)"
"0","}"
"0",""
"0","cas_to_numeric <- function(df) {"
"0","  df <- df %>%"
"0","    mutate_if(is.integer64, as.numeric)"
"0","  return(df)"
"0","}"
"0",""
"0","# use this to select the columns we care about "
"0","relevant_cols <- function(df) {"
"0","  return(df %>%"
"0","    dplyr::select("
"0","      any_of("
"0","        c("
"0","          ""test_id"","
"0","          ""reference_number"","
"0","          ""chemical_name"","
"0","          ""Chemical_name"","
"0","          ""test_cas"","
"0","          ""species_number"","
"0","          ""organism_habitat"","
"0","          ""exposure_type"","
"0","          ""control_type"","
"0","          ""media_type"","
"0","          ""genus"","
"0","          ""common_name"","
"0","          ""latin_name"","
"0","          ""species"","
"0","          ""ecotox_group"","
"0","          ""obs_duration_mean"","
"0","          ""obs_duration_unit"","
"0","          ""endpoint"","
"0","          ""effect"","
"0","          ""measurement"","
"0","          ""conc1_mean"","
"0","          ""conc1_unit"","
"0","          ""conversion_factors"","
"0","          ""conc_ug_L"","
"0","          ""taxonomic.distance"","
"0","          ""r"", ""R2"", ""intercept"", ""slope"", ""MSE"","
"0","          ""endpoint_type"", ""US-EPA New Chemical Categories"", ""CAS"", ""ASTER"","
"0","          ""chemical_name"","
"0","          ""ecotox_group"","
"0","          ""dtxsid"", ""epaName"", ""formatted_cas"""
"0","        )"
"0","      )"
"0","    ))"
"0","}"
